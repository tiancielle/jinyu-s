<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Chargement...</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <style>
    :root{--bg1:#FFE4E1;--bg2:#FFB6C1;--accent:#FF1493}
    html,body{height:100%;margin:0;font-family:Pacifico,Arial,Helvetica,sans-serif;background:linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 100%);display:flex;align-items:center;justify-content:center}
    .loading-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:24px}
    .loading-title{font-size:28px;color:var(--accent);margin-bottom:24px}
    .progress-wrapper{position:relative;width:500px;max-width:80%;margin:0 auto;overflow:visible}
    .progress-bar-container{position:relative;width:100%;height:40px;background:#FFE4E1;border:3px solid #FF69B4;border-radius:20px;overflow:hidden;box-shadow:0 5px 20px rgba(255,105,180,0.2)}
    .progress-bar-fill{height:100%;background:linear-gradient(90deg,#FF69B4 0%,#FF1493 100%);width:0%;border-radius:18px;position:relative;transition:width .1s linear}
    /* Icon is placed above the bar and centered */
    /* icon absolutely positioned inside the wrapper so it can follow the fill */
    .loading-icon{position:absolute;top:-70px;left:0%;transform:translateX(-50%);width:120px;height:120px;object-fit:contain;transform-origin:center;animation:swing 1.2s ease-in-out infinite;z-index:20;pointer-events:none}
    .percentage{position:absolute;top:-36px;right:0;font-size:18px;color:var(--accent);font-weight:700}
    @keyframes swing{0%{transform:rotate(-20deg)}50%{transform:rotate(20deg)}100%{transform:rotate(-20deg)}}
    @media (max-width:1024px){.loading-icon{width:90px;height:90px;top:-56px}}
    @media (max-width:600px){.loading-title{font-size:22px}.progress-bar-container{height:36px}.loading-icon{width:60px;height:60px;top:-46px}}
  </style>
</head>
<body>
  <div class="loading-container">
    <h1 class="loading-title">loading for a little suprise... âœ¨</h1>

      <!-- wrapper holds both the icon (absolute) and the progress bar (so icon can follow the fill) -->
      <div class="progress-wrapper">
        <img src="res/loading/hali.png" alt="loading" class="loading-icon" id="icon">
        <div class="progress-bar-container" role="progressbar" aria-valuemin="0" aria-valuemax="100">
          <div class="progress-bar-fill" id="fill"></div>
          <span class="percentage" id="percentage">0%</span>
        </div>
      </div>
  </div>

  <script>
    (function(){
      const fill = document.getElementById('fill');
      const icon = document.getElementById('icon');
      const percentEl = document.getElementById('percentage');
      let percent = 0;
      const stepMs = 100; // 100ms per step
      const step = 2; // 2% per step -> 50 steps -> 5s

      const wrapper = document.querySelector('.progress-wrapper');
      const interval = setInterval(()=>{
        percent = Math.min(100, percent + step);
        fill.style.width = percent + '%';
        percentEl.textContent = percent + '%';

        // make icon follow the end of the fill while staying fully visible
        const wrapperRect = wrapper.getBoundingClientRect();
        const iconRect = icon.getBoundingClientRect();
        const iconHalf = (iconRect.width || 120) / 2;
        const minPercent = (iconHalf / wrapperRect.width) * 100;
        const maxPercent = 100 - minPercent;
        const clamped = Math.min(maxPercent, Math.max(minPercent, percent));
        icon.style.left = clamped + '%';

        if(percent >= 100){
          clearInterval(interval);
          setTimeout(()=>{ window.location.href = 'final.html'; }, 500);
        }
      }, stepMs);
    })();
  </script>
</body>
</html>
